<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kraken Rollover Fee Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<link rel="stylesheet" href="styles.css">
</head>

<body class="body">
  <nav class="navbar navbar-expand-lg sticky-top shadow-sm" data-bs-theme="dark">
    <div class="container-fluid">
      <img id='logo' class="img-fluid" src= assets/kraken-logo.png>
      <a class="navbar-brand" href="#">Rollover Fee Tracker</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav ">
          <li class="nav-item">
            <a class="nav-link mx-1 active" aria-current="page" href="index.html">Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-1" href="instructions.html">Instructions</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-1 connect-btn" href="#" data-bs-toggle="modal" data-bs-target="#connectModal" id="navConnect">Connect</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

<!--Connect Modal-->
<div class="modal fade" id="connectModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg justify-content-center">
    <div class="modal-content connect-modal text-center mx-auto">

      <!-- normal connect content -->
      <div id="connectContent">
        <div class="modal-header border-0 flex-column align-items-center text-center">
          <img src="assets/kraken-logo.png" class="mb-3" width="56px">
          <h5 class="modal-title fw-bold">Connect your Kraken account</h5>
        </div>

        <div class="modal-body mt-3 mb-4 px-4">
          <div class="row g-3 justify-content-center">
            <div class="col-md-9">
              <div id="initialApiSection">
                <h6 class="mb-2 fw-semibold">API Key</h6>
                <p class="small text-muted mb-3">
                  Use your Kraken API key to sync rollover fees automatically.
                </p>
                <button id="apiConnectBtn" class="btn btn-primary rounded-pill px-4 py-2 w-75">
                  Connect with API
                </button>
              </div>

              <form id="apiKeyForm" class="mt-3 d-none">
                <div class="mb-3 text-start">
                  <label for="publicApiKey" class="form-label small mb-1">
                    Public API Key
                  </label>
                  <input type="text"
                         class="form-control"
                         id="publicApiKey"
                         placeholder="Enter your public API key">
                </div>

                <div class="mb-3 text-start">
                  <label for="privateApiKey" class="form-label small mb-1">
                    Private API Key
                  </label>
                  <input type="password"
                         class="form-control"
                         id="privateApiKey"
                         placeholder="Enter your private API key">
                </div>

                <button type="submit" class="btn btn-success w-100">
                  Save & Connect
                </button>
              </form>
            </div>
          </div>
        </div>

        <div class="modal-footer border-0 justify-content-center">
          <small class="text-muted">
            We do not share your API keys or rollover data with third parties.
          </small>
        </div>
      </div>

      <!-- loading state (shown AFTER submit) -->
      <div id="loadingSection" class="d-none py-5">
        <div class="d-flex flex-column align-items-center justify-content-center">
          <div class="spinner-border text-primary"
               role="status"
               style="width: 3rem; height: 3rem; border-width: .35rem;">
            <span class="visually-hidden">Loading...</span>
          </div>
          <h5 class="mt-4 fw-semibold">
            Loading your ledger history...
          </h5>
          <p class="mt-2 mb-1 text-muted small">
            This may take a while, please do not close this page.
          </p>
          <p id="loadingPageText" class="text-muted small mb-0">
            Currently processing page <span id="loadingPageNumber">1</span>
          </p>
          <button id="cancelLoadingBtn"
                  type="button"
                  class="btn btn-outline-secondary btn-sm mt-3">
            Cancel
          </button>
        </div>
      </div>

    </div>
  </div>
</div>

<div id="loadingSection" class="text-center d-none py-4">
  <div class="d-flex flex-column align-items-center">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem; border-width: .35rem;">
      <span class="visually-hidden">Loading...</span>
    </div>
    <h5 class="mt-4 fw-semibold">
      Loading your ledger history...
    </h5>
    <p class="mt-2 mb-1 text-muted small">
      This may take a while, please do not close this page.
    </p>
    <button id="cancelLoadingBtn" type="button" class="btn btn-outline-light btn sm mt-3">
      Cancel
    </button>
  </div>
</div>
  
<div id="background">

<div class="container-fluid text-center gx-5 justify-content-center">

    <div class="row toprow mb-3">

     <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">1 Day</h5>
          <hr>
          <p class="card-text" id="sum-1d">$0.00</p>
        </div>
      </div>
     </div> 

     <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">7 Day</h5>
          <hr>
          <p class="card-text" id="sum-7d">$0.00</p>
        </div>
      </div>
    </div>

      <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">1 Month</h5>
          <hr>
          <p class="card-text" id="sum-30d">$0.00</p>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">1 Year</h5>
          <hr>
          <p class="card-text" id="sum-365d">$0.00</p>
        </div>
      </div>
    </div>
    
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Lifetime</h5>
          <hr>
          <p class="card-text" id="sum-lifetime">$0.00</p>
        </div>
      </div>
    </div>
  </div>


<div class="row bottomrow">
  <div class="col-8 graphcolumn">
    <div class="graphbox">
    <canvas id="myChart">
      
    </canvas>
  </div>
</div>

  <div class="col-4 ledgercolumn">
    <div class="ledgerbox">
    <h5>Recent Rollover Fees</h5>
    <ul id="transactionlist" class="list-unstyled">

    </ul>
  </div>
  </div>
</div>

</div>
</div>

<script src="script.js"></script>
</body>
</html>